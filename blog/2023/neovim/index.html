<!DOCTYPE html> <html lang="cn"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>neovim | Jun Chen</title> <meta name="author" content="Jun Chen"> <meta name="description" content="chenjun personal site and blog "> <meta name="keywords" content="blog"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://chenjun305.github.io/blog/2023/neovim/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Jun Chen</span></a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">neovim</h1> <p class="post-meta">January 8, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/dev-tools"> <i class="fas fa-hashtag fa-sm"></i> dev-tools</a>     ·   <a href="/blog/category/programming"> <i class="fas fa-tag fa-sm"></i> programming</a>   </p> </header> <article class="post-content"> <p>neovim是vim的进化版，比vim更强大，配置功能除了兼容Vimscript，还可以使用lua脚本（LuaJIT）进行配置。<br> 可以从这里了解<a href="https://neovim.io/doc/user/vim_diff.html#vim-differences" rel="external nofollow noopener" target="_blank"> neovim与vim的不同点 </a>，<br> 下面总结一些主要的不同点：</p> <ul> <li>默认配置文件路径不同 <ul> <li>Use $XDG_CONFIG_HOME/nvim/init.vim instead of .vimrc for your config.</li> <li>Use $XDG_CONFIG_HOME/nvim instead of .vim to store configuration files.</li> <li>Use $XDG_STATE_HOME/nvim/shada/main.shada instead of .viminfo for persistent session information</li> </ul> </li> <li>一些默认的配置，少量快捷键，autocmd有不同</li> <li>neovim增加了大量的新功能 <ul> <li><a href="https://neovim.io/doc/user/api.html#API" rel="external nofollow noopener" target="_blank"> API </a></li> <li><a href="https://neovim.io/doc/user/job_control.html#job-control" rel="external nofollow noopener" target="_blank"> Job control </a></li> <li><a href="https://neovim.io/doc/user/lsp.html#lsp" rel="external nofollow noopener" target="_blank"> LSP framework </a></li> <li><a href="https://neovim.io/doc/user/lua.html#lua" rel="external nofollow noopener" target="_blank"> Lua scripting </a></li> <li><a href="https://neovim.io/doc/user/treesitter.html#treesitter" rel="external nofollow noopener" target="_blank"> Parsing engine treesitter </a></li> <li>…<a href="https://neovim.io/doc/user/vim_diff.html#nvim-features" rel="external nofollow noopener" target="_blank"> 还有很多 </a> </li> </ul> </li> <li><a href="https://neovim.io/doc/user/vim_diff.html#nvim-removed" rel="external nofollow noopener" target="_blank">Removed legacy features</a></li> </ul> <h2 id="安装neovim">安装<a href="https://neovim.io/" rel="external nofollow noopener" target="_blank">neovim</a> </h2> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install neovim
</code></pre></div></div> <h2 id="配置neovim">配置neovim</h2> <p>与vim不同的是，neovim的配置默认位于路径<code class="language-plaintext highlighter-rouge">$HOME/.config/nvim/</code>下。</p> <p>我是基于<a href="https://github.com/LazyVim/LazyVim" rel="external nofollow noopener" target="_blank">LazyVim</a>来配置的，详细可参考<a href="https://lazyvim.github.io/installation" rel="external nofollow noopener" target="_blank">文档</a></p> <h3 id="install-other-tools">install other tools</h3> <ul> <li> <a href="https://github.com/jesseduffield/lazygit" rel="external nofollow noopener" target="_blank">lazygit</a> : 一个图形化git，可提高工作效率。</li> <li>for telescope.nvim <ul> <li> <a href="https://github.com/BurntSushi/ripgrep" rel="external nofollow noopener" target="_blank">ripgrep</a> : live grep</li> <li> <a href="https://github.com/sharkdp/fd" rel="external nofollow noopener" target="_blank">fd</a> : find files</li> </ul> </li> </ul> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>brew install lazygit
brew install ripgrep
brew install fd
</code></pre></div></div> <h3 id="config-neovim">config neovim</h3> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone git@github.com:chenjun305/nvim-config.git ~/.config/nvim
</code></pre></div></div> <p>如果不是第一次配置nvim, 已经有<code class="language-plaintext highlighter-rouge">~/.config/nvim/</code>配置，需要先进行备份。</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># required
mv ~/.config/nvim{,.bak}

# optional but recommended
mv ~/.local/share/nvim{,.bak}
mv ~/.local/state/nvim{,.bak}
mv ~/.cache/nvim{,.bak}
</code></pre></div></div> <h2 id="常用插件">常用插件</h2> <h3 id="-lazynvim-"><a href="https://github.com/folke/lazy.nvim" rel="external nofollow noopener" target="_blank"> lazy.nvim </a></h3> <p>一个优秀的插件管理器, 其他插件都是通过lazy.nvim进行管理的。</p> <h3 id="which-keynvim"><a href="https://github.com/folke/which-key.nvim" rel="external nofollow noopener" target="_blank">which-key.nvim</a></h3> <p>快捷键提示功能。</p> <h3 id="telescopenvim"><a href="https://github.com/nvim-telescope/telescope.nvim" rel="external nofollow noopener" target="_blank">telescope.nvim</a></h3> <p>强大的查找搜索功能。</p> <h3 id="im-selectnvim"><a href="https://github.com/keaising/im-select.nvim" rel="external nofollow noopener" target="_blank">im-select.nvim</a></h3> <p>我们在使用neovim输入中文时，总是会遇到1个问题，在insert模式下，我们用中文输入法输入中文，当我们通过<esc>返回Normal模式时，由于输入法还是中文，必须手动切换到英文输入法才能使用vim的命令。 im-select插件就是为了解决这个问题，它可以在我们返回Normal模式时，自动将我们的输入法切换到英文，并且当再次进入insert模式时，又能自动帮我们从英文切换回上一次的输入法。从而大大提高编码效率。 要使用im-select插件，需要先在系统安装im-select命令，im-select插件的原理就是通过调用这个命令来实现功能的。</esc></p> <ul> <li>安装<a href="https://github.com/daipeihust/im-select" rel="external nofollow noopener" target="_blank">im-select命令</a> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>brew tap daipeihust/tap
brew install im-select
</code></pre></div> </div> <p>安装完后可在shell下通过<code class="language-plaintext highlighter-rouge">which im-select</code>进行验证，和在nvim中通过<code class="language-plaintext highlighter-rouge">:!which im-select</code>进行验证。</p> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>$ which im-select                                                                                                ABRT ✘
/usr/local/bin/im-select
$ im-select                                                                                                           ✔
com.apple.keylayout.ABC
</code></pre></div> </div> </li> <li>安装im-select.nvim插件 如果使用的是LazyVim时，创建<code class="language-plaintext highlighter-rouge">~/.config/nvim/lua/plugins/im-select.lua</code>文件，添加如下配置： <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>return {
{
  "keaising/im-select.nvim",
  opts = { default_command = "im-select" },
},
}
</code></pre></div> </div> </li> </ul> <h3 id="lazygit"><a href="https://github.com/jesseduffield/lazygit" rel="external nofollow noopener" target="_blank">lazygit</a></h3> <p>terminal下<code class="language-plaintext highlighter-rouge">lazygit</code>命令进入，nvim下通过<code class="language-plaintext highlighter-rouge">&lt;Leader&gt;gg</code>自定义命令打开lazygit界面。</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/lazygit-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/lazygit-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/lazygit-1400.webp"></source> <img src="/assets/img/lazygit.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> lazygit界面 </div> <p>lazygit非常强大，有非常多的命令可以使用，详细可参考<a href="https://github.com/jesseduffield/lazygit/blob/master/docs/keybindings/Keybindings_en.md" rel="external nofollow noopener" target="_blank">Lazygit Keybindings</a></p> <p>初学者可先掌握一些常用命令就可满足大部分使用场景的需要。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">&lt;space&gt;</code> 光标在文件窗口时，可按空格键stage或unstage文件，相当于<code class="language-plaintext highlighter-rouge">git add -- &lt;file&gt;</code>命令</li> <li> <code class="language-plaintext highlighter-rouge">c（小写)</code> 命令相当于<code class="language-plaintext highlighter-rouge">git commit</code> </li> <li> <code class="language-plaintext highlighter-rouge">P(大写)</code> 命令相当于<code class="language-plaintext highlighter-rouge">git push</code> </li> <li> <code class="language-plaintext highlighter-rouge">p(小写)</code> 命令相当于<code class="language-plaintext highlighter-rouge">git pull</code> </li> </ul> <h3 id="keymaps"><a href="https://www.lazyvim.org/keymaps" rel="external nofollow noopener" target="_blank">keymaps</a></h3> <p>集成了<a href="https://github.com/folke/which-key.nvim" rel="external nofollow noopener" target="_blank"> which-key.nvim </a>, 有快捷键提示功能，按键后(比如空格)会提示可能的后续快捷键及相应的功能。</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Jun Chen. Last updated: December 13, 2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>