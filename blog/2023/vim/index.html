<!DOCTYPE html> <html lang="cn"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>精通vim | Jun Chen</title> <meta name="author" content="Jun Chen"> <meta name="description" content="chenjun personal site and blog "> <meta name="keywords" content="blog"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://chenjun305.github.io/blog/2023/vim/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Jun Chen</span></a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">精通vim</h1> <p class="post-meta">January 7, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/dev-tools"> <i class="fas fa-hashtag fa-sm"></i> dev-tools</a>     ·   <a href="/blog/category/programming"> <i class="fas fa-tag fa-sm"></i> programming</a>   </p> </header> <article class="post-content"> <h2 id="vim简介"><a href="https://en.wikipedia.org/wiki/Vim_(text_editor)" rel="external nofollow noopener" target="_blank">vim简介</a></h2> <p><a href="https://www.vim.org/" rel="external nofollow noopener" target="_blank">vim</a>是一款免费的开源的文本编辑器，可用它来编写代码，文档等。<br> 在Apple OS X，Linux下一般默认已经随操作系统安装好了。<br> vim是在Vi的基础上改进和增加了很多特性。从它诞生到现在已经有几十年的历史了。</p> <ul> <li>vi was written by Bill Joy in 1976</li> <li>vim (Vi IMproved) released by Bram Moolenaar in 1991</li> <li>Neovim project was started in 2014 (更强大的vim)</li> </ul> <p>为什么要学习vim呢?</p> <ul> <li>虽然它有一定的learning curve, 但一但掌握了它的command, operation, motion的话，那用它编码将会非常的高效，作为一个每天都要编码的程序员来说，投资时间学习vim就像是投资时间学习盲打一样，非常有价值。</li> <li>很多服务器都是linux系统，没有像<code class="language-plaintext highlighter-rouge">VS Code</code>这样的IDE，但一般都预装了vim</li> <li>很多现代IDE，比如<code class="language-plaintext highlighter-rouge">VS Code</code>等，都可以安装VIM插件，从而可以使用vim的高效motion和command等。</li> </ul> <h2 id="vim模式">vim模式</h2> <p>vim是一个基于模式的编辑器，严格来说，vim包含<a href="https://web.archive.org/web/20190827193727/http://vimdoc.sourceforge.net/htmldoc/intro.html#vim-modes-intro" rel="external nofollow noopener" target="_blank">6个基本模式和6个附加模式</a>， 但常用的是以下4个基本模式。</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/vim-modes.svg-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/vim-modes.svg-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/vim-modes.svg-1400.webp"></source> <img src="/assets/img/vim-modes.svg" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> vim的基本模式 </div> <ul> <li>Normal模式 <ul> <li>vim默认模式，该模式下键盘键入的字符都相当于命令</li> <li>其他模式下可通过<code class="language-plaintext highlighter-rouge">&lt;esc&gt;</code>键回到normal模式, command-line模式下按<code class="language-plaintext highlighter-rouge">Enter</code>键执行命令后也会回到Normal模式。</li> </ul> </li> <li>Insert模式 <ul> <li>进入该模式后，键盘键入的字符相当于普通的文本插入文件中。</li> <li>在Normal模式下，可通过输入这些命令之一<code class="language-plaintext highlighter-rouge">i</code>, <code class="language-plaintext highlighter-rouge">I</code>, <code class="language-plaintext highlighter-rouge">a</code>, <code class="language-plaintext highlighter-rouge">A</code>, <code class="language-plaintext highlighter-rouge">o</code>, <code class="language-plaintext highlighter-rouge">O</code>, <code class="language-plaintext highlighter-rouge">c</code>, <code class="language-plaintext highlighter-rouge">C</code>进入Insert模式</li> </ul> </li> <li>Visual模式 <ul> <li>进入Visual模式后，光标下的文本是选中高亮状态。</li> <li>在Normal模式下，可通过以下字符命令进入Visual模式 <ul> <li> <code class="language-plaintext highlighter-rouge">v</code>(小写) 进入visual模式，选择光标所在字符并高亮</li> <li> <code class="language-plaintext highlighter-rouge">v</code>(大写) visual line模式，选中的是整行</li> <li> <code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt;v</code> 进入visual block模式，矩形选择</li> </ul> </li> <li>进入Visual模式后再跟<code class="language-plaintext highlighter-rouge">&lt;motion&gt;</code>组合可增加选区</li> <li>选中后可以加上<code class="language-plaintext highlighter-rouge">&lt;operator&gt;</code>比如（<code class="language-plaintext highlighter-rouge">d</code>删除，<code class="language-plaintext highlighter-rouge">y</code>拷贝，<code class="language-plaintext highlighter-rouge">c</code>改变 <code class="language-plaintext highlighter-rouge">&gt;</code>右缩进 <code class="language-plaintext highlighter-rouge">&lt;</code>左移)对选中区域的文本进行相应操作。</li> <li>选中后也可以通过<code class="language-plaintext highlighter-rouge">:s/&lt;pattern&gt;/&lt;replace&gt;</code>进入command模式对选中区域进行搜索替换等</li> </ul> </li> <li>Command-line模式 <ul> <li>在Normal模式下，输入<code class="language-plaintext highlighter-rouge">:</code>或<code class="language-plaintext highlighter-rouge">/</code>或<code class="language-plaintext highlighter-rouge">?</code>进入命令行模式, <code class="language-plaintext highlighter-rouge">/</code>或<code class="language-plaintext highlighter-rouge">?</code>为查找字符串功能。</li> <li>以下为常用的一些命令 <ul> <li> <code class="language-plaintext highlighter-rouge">:w</code> 保存更改, <code class="language-plaintext highlighter-rouge">:q</code> 退出, <code class="language-plaintext highlighter-rouge">:wq</code> 保存并退出, <code class="language-plaintext highlighter-rouge">q!</code> 不保存退出, <code class="language-plaintext highlighter-rouge">:w FILENAME</code> 将对文件的改动保存到文件中.</li> <li>要向当前文件中插入另外的文件的内容，请输入 <code class="language-plaintext highlighter-rouge">:r FILENAME</code>, <code class="language-plaintext highlighter-rouge">:r !ls</code> 可以读取 ls 命令的输出，并把它放置在光标下面。</li> <li> <code class="language-plaintext highlighter-rouge">v motion :w FILENAME</code> 可将当前编辑文件中可视模式下选中的内容保存到文件FILENAME 中。</li> <li> <code class="language-plaintext highlighter-rouge">:e &lt;file&gt;</code> 打开文件， <code class="language-plaintext highlighter-rouge">:new &lt;file&gt;</code> 新建文件。</li> <li> <code class="language-plaintext highlighter-rouge">:set nu</code>, <code class="language-plaintext highlighter-rouge">set rnu</code>, <code class="language-plaintext highlighter-rouge">:set ignorecase</code> </li> <li> <code class="language-plaintext highlighter-rouge">:!</code> 然后紧接着输入一个外部命令可以执行该外部命令</li> <li>获取帮助信息：按<code class="language-plaintext highlighter-rouge">F1</code> 或 输入<code class="language-plaintext highlighter-rouge">:help</code> 查看帮助, 一些例子：<code class="language-plaintext highlighter-rouge">:h word</code>, <code class="language-plaintext highlighter-rouge">:h WORD</code>, <code class="language-plaintext highlighter-rouge">:h sentence</code>, <code class="language-plaintext highlighter-rouge">:h paragraph</code>, 阅读 Vim 的用户手册，使用的命令是： <code class="language-plaintext highlighter-rouge">:help user-manual</code> </li> <li>使用 CTRL-D 和 <tab> 可以进行命令行补全</tab> </li> <li> <code class="language-plaintext highlighter-rouge">:vsp</code> 纵向拆分窗口，<code class="language-plaintext highlighter-rouge">:sp</code> 横向拆分窗口, 输入 CTRL-W 可以使您在窗口之间跳转。</li> </ul> </li> </ul> </li> </ul> <h2 id="vim的功能">vim的功能</h2> <p>vim将键盘上的所有字符，包括大小写字母，数字和标点符号每个都设计成具有功能的命令，正式由于这些命令，使得vim非常高效和强大。 所有这些字符按功能和使用特点可大致分为4类。</p> <ul> <li>motion</li> <li>operator</li> <li>command</li> <li>extra</li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/vim-graphical-cheat-sheet-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/vim-graphical-cheat-sheet-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/vim-graphical-cheat-sheet-1400.webp"></source> <img src="/assets/img/vim-graphical-cheat-sheet.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> vim graphical cheat sheet </div> <h3 id="motion">motion</h3> <p>vim motion的作用是移动光标，定义前面的<code class="language-plaintext highlighter-rouge">&lt;operator&gt;</code>的操作范围，或改变Visual模式的选择区域。<br> 所有<code class="language-plaintext highlighter-rouge">vim motion</code>前面均可以加上数字，表示同样的动作执行几次，比如<code class="language-plaintext highlighter-rouge">7j</code>向下7行；</p> <h3 id="横向motion">横向motion</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">h</code> 左移1个字符, <code class="language-plaintext highlighter-rouge">l</code> 右边1个字符</li> <li> <code class="language-plaintext highlighter-rouge">word</code>指全是字母或标点符号的需要，可以是标点符号或空格分隔,<code class="language-plaintext highlighter-rouge">WORD</code> 指以空格分隔的符号序列, 可通过<code class="language-plaintext highlighter-rouge">:h word</code>了解详细。</li> <li> <code class="language-plaintext highlighter-rouge">w</code> 右移到下1个<code class="language-plaintext highlighter-rouge">word</code>开头,可<code class="language-plaintext highlighter-rouge">W</code> 右移到下一个1个<code class="language-plaintext highlighter-rouge">WORD</code>开头.</li> <li> <code class="language-plaintext highlighter-rouge">b</code> 左移到上一个1个<code class="language-plaintext highlighter-rouge">word</code>开头, <code class="language-plaintext highlighter-rouge">B</code> 左移到上一个1个<code class="language-plaintext highlighter-rouge">WORD</code>开头.</li> <li> <code class="language-plaintext highlighter-rouge">e</code> 右移到下一个<code class="language-plaintext highlighter-rouge">word</code>尾, <code class="language-plaintext highlighter-rouge">E</code> 右移到下一个<code class="language-plaintext highlighter-rouge">WORD</code>尾.</li> <li> <code class="language-plaintext highlighter-rouge">ge</code> 左移到上一个<code class="language-plaintext highlighter-rouge">word</code>尾，<code class="language-plaintext highlighter-rouge">gE</code> 左移到上一个<code class="language-plaintext highlighter-rouge">WORD</code>尾.</li> <li> <code class="language-plaintext highlighter-rouge">f</code> 后跟1个字符，找到同一行后面的字符，<code class="language-plaintext highlighter-rouge">t</code>与<code class="language-plaintext highlighter-rouge">f</code>功能相同，但光标停留在找到的字符前面，大写的<code class="language-plaintext highlighter-rouge">F</code> <code class="language-plaintext highlighter-rouge">T</code> 是反方向往左边找。<code class="language-plaintext highlighter-rouge">;</code>重复下一个<code class="language-plaintext highlighter-rouge">fFtT</code>, <code class="language-plaintext highlighter-rouge">,</code>反方向重复下1个<code class="language-plaintext highlighter-rouge">fFtT</code>.</li> <li> <code class="language-plaintext highlighter-rouge">0</code>或<code class="language-plaintext highlighter-rouge">|</code> 左移到行首，<code class="language-plaintext highlighter-rouge">^</code>或<code class="language-plaintext highlighter-rouge">_</code> 左移到行首的首个非空字符， <code class="language-plaintext highlighter-rouge">$</code> 右移到行尾。</li> </ul> <h3 id="纵向motion">纵向motion</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">j</code> 下移1行，<code class="language-plaintext highlighter-rouge">k</code> 上移1行, <code class="language-plaintext highlighter-rouge">+</code> 下一行行首，<code class="language-plaintext highlighter-rouge">-</code> 上一行行首。</li> <li> <code class="language-plaintext highlighter-rouge">G</code> 移动到文件末尾，<code class="language-plaintext highlighter-rouge">{number}G</code> 移动到第number行，<code class="language-plaintext highlighter-rouge">M</code> 移动到屏幕中央， <code class="language-plaintext highlighter-rouge">H</code> 移动到屏幕顶部， <code class="language-plaintext highlighter-rouge">L</code> 移动到屏幕底部.</li> <li> <code class="language-plaintext highlighter-rouge">{</code> 跳转到上一段空行处 <code class="language-plaintext highlighter-rouge">}</code> 跳转到下一段空行处，以空行隔开的为不同的段。<code class="language-plaintext highlighter-rouge">:h paragraph</code>查看详情。</li> <li> <code class="language-plaintext highlighter-rouge">(</code> 左括号为跳到上一句，<code class="language-plaintext highlighter-rouge">)</code> 右括号跳转到下一句，句子以<code class="language-plaintext highlighter-rouge">.?!</code>等隔开。空行也认为是1句。<code class="language-plaintext highlighter-rouge">:h sentence</code>查看帮助。</li> <li> <code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt; e</code> 向上滚动1行，<code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt; y</code> 向下滚动1行。</li> <li> <code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt; d</code> 向下翻半页，<code class="language-plaintext highlighter-rouge">&lt;ctrl&gt; u</code> 向上翻半页， <code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt; f</code> 向下翻一页， <code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt; b</code> 向上翻一页.</li> <li> <code class="language-plaintext highlighter-rouge">%</code> 跳到匹配的<code class="language-plaintext highlighter-rouge">()[]{}</code> </li> <li> <code class="language-plaintext highlighter-rouge">[</code>, <code class="language-plaintext highlighter-rouge">]</code> misc <ul> <li> <code class="language-plaintext highlighter-rouge">[(</code>Go to previous unmatched <code class="language-plaintext highlighter-rouge">(</code> </li> <li> <code class="language-plaintext highlighter-rouge">[{</code> Go to previous unmatched <code class="language-plaintext highlighter-rouge">{</code> </li> <li> <code class="language-plaintext highlighter-rouge">])</code> Go to next unmatched <code class="language-plaintext highlighter-rouge">)</code> </li> <li> <code class="language-plaintext highlighter-rouge">]}</code> Go to next unmatched <code class="language-plaintext highlighter-rouge">}</code> </li> <li> <code class="language-plaintext highlighter-rouge">]m</code> Go to next start of method (Java like languages)</li> <li> <code class="language-plaintext highlighter-rouge">]M</code>Go to next end of method</li> <li> <code class="language-plaintext highlighter-rouge">[m</code>Go to previous start of method</li> <li> <code class="language-plaintext highlighter-rouge">[M</code>Go to previous end of method</li> </ul> </li> </ul> <h3 id="查找">查找</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">/</code> 向后查找, <code class="language-plaintext highlighter-rouge">?</code> 向前查找，<code class="language-plaintext highlighter-rouge">n</code> 同方向查找下一个， <code class="language-plaintext highlighter-rouge">N</code> 反方向查找下一个。</li> <li> <code class="language-plaintext highlighter-rouge">*</code> 向后查找光标所在处单词， <code class="language-plaintext highlighter-rouge">#</code> 向前查找光标所在处单词。</li> </ul> <h3 id="jump-list">jump list</h3> <p><code class="language-plaintext highlighter-rouge">:h jump-motions</code> 可以查看哪些命令会加入jump list, 查看当前jump list: <code class="language-plaintext highlighter-rouge">:jump</code></p> <ul> <li> <code class="language-plaintext highlighter-rouge">Ctrl-o</code> 跳转到jump list的上个位置</li> <li> <code class="language-plaintext highlighter-rouge">Ctrl-i</code> 跳转到jump list的下个位置</li> </ul> <h3 id="替换类命令">替换类命令</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">:s/thee/the</code> 只改变光标所在行的第一个匹配。</li> <li> <code class="language-plaintext highlighter-rouge">:s/thee/the/g</code> 则是替换全行的匹配串</li> <li> <code class="language-plaintext highlighter-rouge">:#,#s/old/new/g</code> 要替换两行之间出现的每个匹配串, 其中 #,# 代表的是替换操作的若干行中首尾两行的行号。</li> <li> <code class="language-plaintext highlighter-rouge">:%s/old/new/g</code> 则是替换整个文件中的每个匹配串。</li> <li> <code class="language-plaintext highlighter-rouge">:%s/old/new/gc</code> 会找到整个文件中的每个匹配串，并且对每个匹配串提示是否进行替换。</li> </ul> <h3 id="command">command</h3> <p>这些字符在Normal模式下可以单独执行。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">Esc</code> 回到Normal模式</li> <li> <p><code class="language-plaintext highlighter-rouge">u</code> undo, <code class="language-plaintext highlighter-rouge">U</code> undo line, <code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt; + r</code> redo重做</p> </li> <li>在Normal模式下，输入以下命令将进入Insert模式 <ul> <li> <code class="language-plaintext highlighter-rouge">i</code> 当前光标的前面开始插入, <code class="language-plaintext highlighter-rouge">a</code> 当前光标的后面开始插入</li> <li> <code class="language-plaintext highlighter-rouge">I</code> 当前行首开始插入, <code class="language-plaintext highlighter-rouge">A</code> 当前行尾开始插入</li> <li> <code class="language-plaintext highlighter-rouge">o</code>(小写) 当前行下面开一个新空行开始插入, <code class="language-plaintext highlighter-rouge">O</code>(大写) 当前行上面开一个新空行开始插入</li> <li> <code class="language-plaintext highlighter-rouge">s</code> 删除光标所在字符并开始插入, <code class="language-plaintext highlighter-rouge">S</code> 删除整行并开始插入</li> <li> <code class="language-plaintext highlighter-rouge">C</code>(大写) 删除当前光标到行尾，并进入插入模式，相当于<code class="language-plaintext highlighter-rouge">c$</code>, 小写<code class="language-plaintext highlighter-rouge">c</code>是1个<code class="language-plaintext highlighter-rouge">operator</code>，后要接<motion>进入insert模式</motion> </li> </ul> </li> <li> <code class="language-plaintext highlighter-rouge">R</code> 进入Replace mode <code class="language-plaintext highlighter-rouge">r</code> 替换光标所在字符</li> <li> <code class="language-plaintext highlighter-rouge">X</code> 删除光标前的字符，相当于backspace, <code class="language-plaintext highlighter-rouge">x</code>删除光标所在的字符</li> <li> <code class="language-plaintext highlighter-rouge">D</code> 删除到行尾，相当于<code class="language-plaintext highlighter-rouge">d$</code> </li> <li> <code class="language-plaintext highlighter-rouge">Y</code> 注意，这个命令在vim和neovim功能不同，在vim中是拷贝整行，相当于<code class="language-plaintext highlighter-rouge">yy</code>， 而在neovim中是拷贝当前光标到行尾，相当于<code class="language-plaintext highlighter-rouge">y$</code> </li> <li> <code class="language-plaintext highlighter-rouge">p</code> 粘贴在光标后，<code class="language-plaintext highlighter-rouge">P(大写)</code>粘贴在光标前</li> <li> <code class="language-plaintext highlighter-rouge">~</code> 切换大小写</li> <li> <code class="language-plaintext highlighter-rouge">J</code> join lines，合并为1行，默认合并当前+下1行, visual模式下合并选中的所有行。</li> <li> <code class="language-plaintext highlighter-rouge">K</code> help</li> <li> <p><code class="language-plaintext highlighter-rouge">Q</code> <a href="https://en.wikibooks.org/wiki/Learning_the_vi_Editor/Vim/Modes#Ex-mode" rel="external nofollow noopener" target="_blank">ex mode</a></p> </li> <li> <code class="language-plaintext highlighter-rouge">.</code> 重复前一个命令, <code class="language-plaintext highlighter-rouge">&amp;</code> repeat :s重复前一个查找替换操作</li> <li>Marks功能，<code class="language-plaintext highlighter-rouge">m + a~z</code> 将当前位置做标记，后续可使用 <code class="language-plaintext highlighter-rouge">重音符号 + a~z</code>的返回, <code class="language-plaintext highlighter-rouge">单引号 + a~z</code>返回标记所在行的第1个非空字符， <code class="language-plaintext highlighter-rouge">重音符号+.</code>返回最后1次修改点。A～Z是全局标记，a~z是每个buffer级别的标记。</li> <li>录制macro功能，<code class="language-plaintext highlighter-rouge">q + a~z</code>开始录制，录制完再按1个<code class="language-plaintext highlighter-rouge">q</code>结束。后面通过<code class="language-plaintext highlighter-rouge">@ + a~z</code>重放macro， <code class="language-plaintext highlighter-rouge">@@</code> 重放上一个执行的macro</li> </ul> <h3 id="operator">operator</h3> <p><code class="language-plaintext highlighter-rouge">&lt;operator&gt;</code>后面要跟上相应的<code class="language-plaintext highlighter-rouge">&lt;motion&gt;</code>表示的操作范围;<br> 格式为<code class="language-plaintext highlighter-rouge">&lt;operator&gt; + 数字 + &lt;motion&gt;</code> ，比如<code class="language-plaintext highlighter-rouge">d7j</code>表示删除向下7行。 或者先在visual模式下选择好范围，再按<operator>操作该范围。</operator></p> <ul> <li> <code class="language-plaintext highlighter-rouge">c(小写) + &lt;motion&gt;</code> ：清空并进入Insert模式</li> <li> <code class="language-plaintext highlighter-rouge">d</code> 删除</li> <li> <code class="language-plaintext highlighter-rouge">y</code> 拷贝</li> <li> <code class="language-plaintext highlighter-rouge">&lt;</code> 左移indent <code class="language-plaintext highlighter-rouge">&gt;</code> 右移indent <code class="language-plaintext highlighter-rouge">=</code> auto format,</li> <li> <code class="language-plaintext highlighter-rouge">!</code> external filter</li> </ul> <p>以上这些operator的双字符都代表操作范围为光标所在行。比如<code class="language-plaintext highlighter-rouge">dd</code>删除整行，<code class="language-plaintext highlighter-rouge">yy</code>拷贝整行，<code class="language-plaintext highlighter-rouge">cc</code>清空整行进入Insert模式，<code class="language-plaintext highlighter-rouge">&gt;&gt;</code> 右移整行，<code class="language-plaintext highlighter-rouge">&lt;&lt;</code> 左移整行.</p> <ul> <li>operator + <text object=""> (inside, around) </text> <ul> <li> <code class="language-plaintext highlighter-rouge">di"</code> 删除双引号内文本 <code class="language-plaintext highlighter-rouge">di(</code> 删除括号内文本</li> <li> <code class="language-plaintext highlighter-rouge">da"</code> 删除包含双引号的文本, <code class="language-plaintext highlighter-rouge">da(</code> 删除包含括号的文本</li> <li> <code class="language-plaintext highlighter-rouge">diw</code> 删除光标所在word， <code class="language-plaintext highlighter-rouge">daw</code> 删除光标所在word和两边空格。</li> </ul> </li> </ul> <h3 id="extra">extra</h3> <p>特殊功能，需要和其他进行组合。</p> <ul> <li> <code class="language-plaintext highlighter-rouge">g</code> extra cmds, <ul> <li> <code class="language-plaintext highlighter-rouge">gg</code> 移动到文件开头,</li> <li> <code class="language-plaintext highlighter-rouge">ge</code> 移动到前一个<code class="language-plaintext highlighter-rouge">word</code>尾, <code class="language-plaintext highlighter-rouge">gE</code> 移动到前一个<code class="language-plaintext highlighter-rouge">WORD</code>尾。</li> <li> <code class="language-plaintext highlighter-rouge">gu{motion}</code> 改为小写</li> <li> <code class="language-plaintext highlighter-rouge">guu</code> 当前行改为小写</li> <li> <code class="language-plaintext highlighter-rouge">gU{motion}</code> 改为大写</li> <li> <code class="language-plaintext highlighter-rouge">gUU</code> 当前行改为大写</li> </ul> </li> <li> <code class="language-plaintext highlighter-rouge">小写z</code> extra cmds, <code class="language-plaintext highlighter-rouge">zt</code> 移动光标所在位置到顶部，<code class="language-plaintext highlighter-rouge">zz</code>到中部，<code class="language-plaintext highlighter-rouge">zb</code>到底部</li> <li> <code class="language-plaintext highlighter-rouge">大写Z</code> quit , <code class="language-plaintext highlighter-rouge">ZZ</code> 保存退出, <code class="language-plaintext highlighter-rouge">ZQ</code>不保存退出</li> <li> <p><code class="language-plaintext highlighter-rouge">"</code> register, 寄存器</p> </li> <li>1~9数字 放到其他操作前面表示次数</li> <li> <code class="language-plaintext highlighter-rouge">\</code> not used</li> </ul> <h2 id="vim中的核心概念">vim中的核心概念</h2> <h3 id="register">register</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">:reg</code> 可查看vim的register, <code class="language-plaintext highlighter-rouge">:help reg</code> 可查看vim寄存器帮助。</li> <li> <code class="language-plaintext highlighter-rouge">"</code> + <code class="language-plaintext highlighter-rouge">a~z</code> + operator : 以双引号开头可定义1个register, 后接 a~z的命名，后续operator操作将文本存储在该register, 或从该register取出内容</li> <li> <code class="language-plaintext highlighter-rouge">"add</code> 将<code class="language-plaintext highlighter-rouge">dd</code>删除的行存储在<code class="language-plaintext highlighter-rouge">"a</code>, <code class="language-plaintext highlighter-rouge">"ap</code> 将register里的内容粘贴。</li> <li> <code class="language-plaintext highlighter-rouge">""</code> 是默认的register, 最近1次操作的内容存储在里面。</li> <li> <code class="language-plaintext highlighter-rouge">q</code> <code class="language-plaintext highlighter-rouge">@</code> record macro和play macro底层原理也是将这些命令存储在了register中。</li> <li>每次在vim中删除的文本都会推入 <code class="language-plaintext highlighter-rouge">"1</code> ~ <code class="language-plaintext highlighter-rouge">"9</code> 的register中, <code class="language-plaintext highlighter-rouge">"0</code> 保存着拷贝的文本。vim会自动保存最近的9次删除。不足1行的文本会保存到小删除register <code class="language-plaintext highlighter-rouge">"-</code> </li> <li>3个只读寄存器，<code class="language-plaintext highlighter-rouge">".</code> 上次insert模式下的文本, <code class="language-plaintext highlighter-rouge">“%</code> 当前文件名，<code class="language-plaintext highlighter-rouge">":</code> 上次命令行模式下的命令。</li> <li> <code class="language-plaintext highlighter-rouge">"#</code> 交替文件寄存器，指buffer中的上一个文件。可通过<code class="language-plaintext highlighter-rouge">&lt;Ctrl&gt; ^</code>切换到交替文件。</li> <li> <code class="language-plaintext highlighter-rouge">"*</code> 和 <code class="language-plaintext highlighter-rouge">"+</code> 指系统剪贴板, 比如<code class="language-plaintext highlighter-rouge">"*yy</code>可以将当前行存入系统剪贴板，可以在其他程序粘贴。反过来也可以。</li> <li> <code class="language-plaintext highlighter-rouge">"/</code> 存储上一次搜索的关键词。</li> </ul> <h3 id="buffer">buffer</h3> <ul> <li> <code class="language-plaintext highlighter-rouge">:ls</code> 或 <code class="language-plaintext highlighter-rouge">:buffers</code> 列出所有的buffer.</li> <li> <code class="language-plaintext highlighter-rouge">:b &lt;number&gt;</code> 显示<number>号buffer.</number> </li> <li> <code class="language-plaintext highlighter-rouge">:b &lt;partial&gt;</code> 通过文件名显示buffer.</li> <li> <code class="language-plaintext highlighter-rouge">:bd</code> 删除当前buffer</li> <li> <code class="language-plaintext highlighter-rouge">:bd!</code> 删除当前buffer(丢弃更新)</li> </ul> <h3 id="autocommands">Autocommands</h3> <ul> <li>Added in Vim 4.0</li> <li>Hooks to allow the user to execute commands depending on the file name.</li> <li>Often used for filetype specific settings: <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>:au BufRead *.c set tw=78 cindent sw=4
:au BufRead *.java source ~/.vim/java.vim
</code></pre></div> </div> </li> </ul> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/vim-auto-commands-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/vim-auto-commands-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/vim-auto-commands-1400.webp"></source> <img src="/assets/img/vim-auto-commands.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> vim Autocommands </div> <h3 id="vim-script">Vim script</h3> <ul> <li>Added in Vim 5.0</li> <li>defines the syntax <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>:if
:while
expressions
variables (only numbers and strings)
User functions (added in Vim 5.2)
</code></pre></div> </div> </li> <li>Automatic memory management: <ul> <li>Reference counting for most things</li> <li>Garbage collection for cycles (later)</li> </ul> </li> <li>Used for syntax highlighting, later ftplugin and indenting.</li> </ul> <h3 id="plugin">plugin</h3> <ul> <li>Added in Vim 6.0</li> <li>Drop a script file in the right place and it gets loaded.</li> <li>plugin management <ul> <li>Added package support in Vim 8.0. <code class="language-plaintext highlighter-rouge">:packadd</code> </li> <li>With a plugin manager plugin: <ul> <li>Vimball (unpacking only)</li> <li>Pathogen</li> <li>Vundle</li> <li>VAM</li> <li>vim-plug</li> </ul> </li> </ul> </li> </ul> <h2 id="seven-habits-of-effective-text-editing">Seven habits of effective text editing</h2> <p>Habit 1: Moving around quickly</p> <ul> <li> <code class="language-plaintext highlighter-rouge">:set hlsearch</code> and use <code class="language-plaintext highlighter-rouge">*</code> command to search</li> </ul> <p>Habit 2: Don’t type it twice</p> <ul> <li>insert mode completion:<code class="language-plaintext highlighter-rouge">CTRL-N</code> </li> <li>Vim 7.0: omni-completion</li> </ul> <p>Habit 3: Fix it when it’s wrong</p> <ul> <li>spell correction macros. <code class="language-plaintext highlighter-rouge">:iabbrev teh the</code> <code class="language-plaintext highlighter-rouge">:syntax keyword WordError teh</code> </li> </ul> <p>Habit 4: A file seldom comes alone</p> <ul> <li>use <code class="language-plaintext highlighter-rouge">gf</code> - Goto file</li> </ul> <p>Habit 5: Let’s work together</p> <p>Habit 6: Text is structured</p> <p>Habit 7: Sharpen the saw</p> <ul> <li>You have to keep on tuning the set of commands you use for your needs.</li> </ul> <h3 id="three-basic-steps">Three basic steps</h3> <p>Step 1: Detect inefficiency</p> <ul> <li>Find out what you waste time on</li> </ul> <p>Step 2: Find a quicker way</p> <ul> <li>read the on-line help</li> <li>read the quick reference, books, etc.</li> <li>ask friends and colleagues</li> <li>search the internet</li> <li>do it yourself</li> </ul> <p>Step 3: Make it a habit</p> <ul> <li>do it</li> <li>keep on improving</li> </ul> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Jun Chen. Last updated: December 13, 2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>